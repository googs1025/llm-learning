## Huggingface Download 
脚本可使用 Huggingface 模型下载，并导入给 ollama 使用

安装模型加速
```bash
 pip install modelscope transformer accelerate
```

运行脚本
```python
python download_model_from_huggingface.py --model_name deepseek-ai/DeepSeek-R1-Distill-Qwen-7B --cache_dir /your/custom/cache/dir --revision your-revision-tag --outfile /root/data/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B/ds-qw-7b.gguf --outtype f16
```

```python
root@VM-0-14-ubuntu:/home/ubuntu# python3 download_model_from_huggingface.py --model_name deepseek-ai/DeepSeek-R1-Distill-Qwen-7B --cache_dir /root/data --revision master --outfile /root/data/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B/ds-qw-7b.gguf --outtype f16
python3: can't open file '/home/ubuntu/download_model_from_huggingface.py': [Errno 2] No such file or directory
root@VM-0-14-ubuntu:/home/ubuntu# python3 d.py --model_name deepseek-ai/DeepSeek-R1-Distill-Qwen-7B --cache_dir /root/data --revision master --outfile /root/data/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B/ds-qw-7b.gguf --outtype f16

Downloading Model to directory: /root/data/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B
2025-03-16 12:44:05,612 - modelscope - WARNING - Using branch: master as version is unstable, use with caution
2025-03-16 12:44:06,430 - modelscope - INFO - Got 11 files, start to download ...
Downloading [configuration.json]: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 73.0/73.0 [00:04<00:00, 16.4B/s]
Downloading [config.json]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 680/680 [00:05<00:00, 116B/s]
Downloading [LICENSE]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1.04k/1.04k [00:08<00:00, 126B/s]
Downloading [model.safetensors.index.json]: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 27.4k/27.4k [00:10<00:00, 2.80kB/s]
Downloading [README.md]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 15.6k/15.6k [00:05<00:00, 2.86kB/s]
Downloading [configuration.json]: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 73.0/73.0 [00:04<00:00, 16.4B/s]
Downloading [figures/benchmark.jpg]: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 759k/759k [00:27<00:00, 28.2kB/s]
Downloading [tokenizer_config.json]: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 3.00k/3.00k [00:20<00:00, 152B/s]
Downloading [tokenizer.json]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 6.71M/6.71M [00:23<00:00, 298kB/s]
Processing 11 items:  73%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████▎                                         | 8.00/11.0 [00:29<00:10, 3.40s/it]
Downloading [model-00002-of-000002.safetensors]:   2%|█▊                                                                                                                         | 95.0M/6.17G [00:09<09:08, 11.9MB/s]
Downloading [generation_config.json]:   0%|                                                                                                                                                 | 0.00/181 [02:00<?, ?B/s]
Downloading [generation_config.json]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 181/181 [00:03<00:00, 48.0B/s]
Processing 11 items:  82%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏                           | 9.00/11.0 [02:03<00:59, 29.5s/it]
Downloading [model-00002-of-000002.safetensors]:   5%|█████▉                                                                                                                      | 305M/6.17G [00:28<10:18, 10.2MB/s]
Downloading [model-00001-of-000002.safetensors]:   0%|▌                                                                                                                          | 40.0M/8.02G [01:14<22:29, 6.35MB/s]
Downloading [model-00001-of-000002.safetensors]:   4%|████▊                                                                                                                       | 319M/8.02G [01:56<20:08, 6.85MB/s]
Downloading [model-00001-of-000002.safetensors]:   4%|█████▏                                                                                                                      | 342M/8.02G [02:00<16:53, 8.14MB/s]
Downloading [model-00001-of-000002.safetensors]:   4%|█████▌                                                                                                                      | 368M/8.02G [02:03<19:51, 6.90MB/s]
Downloading [model-00001-of-000002.safetensors]:   7%|█████████▏                                                                                                                  | 607M/8.02G [02:40<21:09, 6.28MB/s]
Downloading [model-00001-of-000002.safetensors]:  14%|█████████████████▌                                                                                                         | 1.14G/8.02G [04:13<19:34, 6.28MB/s]
Downloading [model-00001-of-000002.safetensors]:  16%|████████████████████▏                                                                                                      | 1.32G/8.02G [04:44<19:33, 6.13MB/s]
Downloading [model-00001-of-000002.safetensors]:  23%|████████████████████████████                                                                                               | 1.83G/8.02G [06:07<16:41, 6.63MB/s]
Downloading [model-00001-of-000002.safetensors]:  23%|████████████████████████████▏                                                                                              | 1.84G/8.02G [06:07<16:35, 6.66MB/s]
Downloading [model-00001-of-000002.safetensors]:  27%|█████████████████████████████████▎                                                                                         | 2.17G/8.02G [07:08<16:34, 6.31MB/s]
Downloading [model-00001-of-000002.safetensors]:  33%|████████████████████████████████████████▊                                                                                  | 2.66G/8.02G [08:28<16:08, 5.94MB/s]
Downloading [model-00001-of-000002.safetensors]:  39%|███████████████████████████████████████████████▋                                                                           | 3.11G/8.02G [09:44<12:52, 6.82MB/s]
Downloading [model-00001-of-000002.safetensors]:  39%|███████████████████████████████████████████████▋                                                                           | 3.11G/8.02G [09:44<12:11, 7.20MB/s]
Downloading [model-00001-of-000002.safetensors]:  46%|████████████████████████████████████████████████████████▋                                                                  | 3.70G/8.02G [11:21<12:22, 6.24MB/s]
Downloading [model-00001-of-000002.safetensors]:  46%|████████████████████████████████████████████████████████▋                                                                  | 3.70G/8.02G [11:21<12:19, 6.27MB/s]
Downloading [model-00001-of-000002.safetensors]:  51%|███████████████████████████████████████████████████████████████▏                                                           | 4.12G/8.02G [12:36<10:25, 6.68MB/s]
Downloading [model-00001-of-000002.safetensors]:  56%|████████████████████████████████████████████████████████████████████▌                                                      | 4.47G/8.02G [13:34<10:53, 5.83MB/s]
Downloading [model-00001-of-000002.safetensors]:  56%|████████████████████████████████████████████████████████████████████▌                                                      | 4.47G/8.02G [13:34<09:43, 6.52MB/s]
Downloading [model-00001-of-000002.safetensors]:  56%|████████████████████████████████████████████████████████████████████▌                                                      | 4.47G/8.02G [13:34<10:55, 5.80MB/s]
Downloading [model-00001-of-000002.safetensors]:  56%|████████████████████████████████████████████████████████████████████▋                                                      | 4.47G/8.02G [13:35<10:45, 5.89MB/s]
Downloading [model-00001-of-000002.safetensors]:  60%|██████████████████████████████████████████████████████████████████████████▏                                                | 4.84G/8.02G [14:35<08:36, 6.61MB/s]
Downloading [model-00001-of-000002.safetensors]:  60%|██████████████████████████████████████████████████████████████████████████▎                                                | 4.84G/8.02G [14:35<09:07, 6.23MB/s]
Downloading [model-00001-of-000002.safetensors]:  62%|████████████████████████████████████████████████████████████████████████████▋                                              | 5.00G/8.02G [15:01<08:30, 6.35MB/s]
Downloading [model-00002-of-000002.safetensors]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 6.17G/6.17G [18:25<00:00, 5.99MB/s]
Processing 11 items:  91%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████              | 10.0/11.0 [18:25<05:06, 306s/it]
Downloading [model-00001-of-000002.safetensors]:  70%|█████████████████████████████████████████████████████████████████████████████████████▉                                     | 5.60G/8.02G [16:43<06:46, 6.39MB/s]
Downloading [model-00002-of-000002.safetensors]:  91%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████▉           | 5.62G/6.17G [16:43<01:39, 5.98MB/s]
Downloading [model-00001-of-000002.safetensors]:  73%|█████████████████████████████████████████████████████████████████████████████████████████▉                                 | 5.86G/8.02G [17:31<06:11, 6.22MB/s]
Downloading [model-00001-of-000002.safetensors]:  73%|██████████████████████████████████████████████████████████████████████████████████████████                                 | 5.87G/8.02G [17:32<05:55, 6.48MB/s]
Downloading [model-00001-of-000002.safetensors]:  77%|██████████████████████████████████████████████████████████████████████████████████████████████▉                            | 6.19G/8.02G [18:25<05:14, 6.24MB/s]
Downloading [model-00001-of-000002.safetensors]:  78%|████████████████████████████████████████████████████████████████████████████████████████████████▏                          | 6.27G/8.02G [18:34<02:48, 11.2MB/s]
Downloading [model-00001-of-000002.safetensors]:  78%|████████████████████████████████████████████████████████████████████████████████████████████████▏                          | 6.27G/8.02G [18:34<02:43, 11.5MB/s]
Downloading [model-00001-of-000002.safetensors]:  78%|████████████████████████████████████████████████████████████████████████████████████████████████▎                          | 6.27G/8.02G [18:34<02:42, 11.5MB/s]
Downloading [model-00001-of-000002.safetensors]:  78%|████████████████████████████████████████████████████████████████████████████████████████████████▎                          | 6.28G/8.02G [18:35<02:44, 11.3MB/s]
Downloading [model-00001-of-000002.safetensors]:  78%|████████████████████████████████████████████████████████████████████████████████████████████████▎                          | 6.28G/8.02G [18:35<02:40, 11.6MB/s]
Downloading [model-00001-of-000002.safetensors]:  78%|████████████████████████████████████████████████████████████████████████████████████████████████▎                          | 6.28G/8.02G [18:35<02:45, 11.2MB/s]
Downloading [model-00001-of-000002.safetensors]:  78%|████████████████████████████████████████████████████████████████████████████████████████████████▍                          | 6.28G/8.02G [18:35<02:50, 10.9MB/s]
Downloading [model-00001-of-000002.safetensors]:  86%|█████████████████████████████████████████████████████████████████████████████████████████████████████████▍                 | 6.88G/8.02G [19:34<01:44, 11.8MB/s]
Downloading [model-00001-of-000002.safetensors]:  86%|█████████████████████████████████████████████████████████████████████████████████████████████████████████▌                 | 6.88G/8.02G [19:34<01:50, 11.1MB/s]
Downloading [model-00001-of-000002.safetensors]:  91%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████▊           | 7.29G/8.02G [20:14<01:08, 11.4MB/s]
Downloading [model-00001-of-000002.safetensors]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 8.02G/8.02G [21:26<00:00, 6.69MB/s]
Processing 11 items: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 11.0/11.0 [21:27<00:00, 117s/it]
2025-03-16 13:05:33,439 - modelscope - INFO - Download model 'deepseek-ai/DeepSeek-R1-Distill-Qwen-7B' successfully.█████████████████████████████████████████████████████████    | 7.76G/8.02G [21:03<00:23, 11.7MB/s]
模型已下载至: /root/data/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B█████████████████████████████████████████████████████████████████████████████████████████████████████████████    | 7.76G/8.02G [21:03<00:24, 11.1MB/s]
Downloading [model-00001-of-000002.safetensors]: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▊| 8.00G/8.02G [21:25<00:01, 11.1MB/s]
Downloading [model-00001-of-000002.safetensors]: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▊| 8.01G/8.02G [21:26<00:00, 11.3MB/s]
Downloading [model-00001-of-000002.safetensors]: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 8.02G/8.02G [21:26<00:00, 12.2MB/s]
模型转换成功！
root@VM-0-14-ubuntu:/home/ubuntu#
```

```bash
root@VM-0-14-ubuntu:/home/ubuntu# mkdir -p ~/.ollama/models && echo "FROM /root/data/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B/ds-qw-7b.gguf" > ~/.ollama/models/ds-r1-qw-7b.txt
root@VM-0-14-ubuntu:/home/ubuntu# cat ~/.ollama/models/ds-r1-qw-7b.txt
FROM /root/data/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B/ds-qw-7b.gguf
root@VM-0-14-ubuntu:/home/ubuntu# vi ~/.ollama/models/ds-r1-qw-7b.txt
root@VM-0-14-ubuntu:/home/ubuntu# ollama create  ds-qw-7b  -f  ~/.ollama/models/ds-r1-qw-7b.txt
gathering model components ⠼
gathering model components
gathering model components
gathering model components
copying file sha256:9bfae30a0fc09021a5d15bd97611c243b6900b63c7c8b900d38562a53ed033f2 100%
parsing GGUF
using existing layer sha256:9bfae30a0fc09021a5d15bd97611c243b6900b63c7c8b900d38562a53ed033f2
writing manifest
success
root@VM-0-14-ubuntu:/home/ubuntu#
```

```bash
root@VM-0-14-ubuntu:/home/ubuntu# ollama list
NAME               ID              SIZE     MODIFIED
ds-qw-7b:latest    8c4a7ef04dd5    15 GB    10 minutes ago
root@VM-0-14-ubuntu:/home/ubuntu# ollama run ds-qw-7b:latest
>>> Send a message (/? for help)
```